#員工資料表
create table employee
(
    emp_id    int auto_increment
        primary key,
    id_number varchar(20) not null,
    emp_name  varchar(20) not null,
    gender    varchar(10) null,
    birth     varchar(20) not null,
    photo     longblob    not null,
    email     varchar(30) not null,
    phone     varchar(30) not null,
    tel       varchar(30) null,
    address   varchar(30) not null
);

#出勤狀況時數表
create table attendance
(
    attendance_id    int auto_increment
        primary key,
    date             date                 not null,
    emp_id           int                  not null,
    total_hours      decimal(4, 2)        not null,
    is_late          tinyint(1) default 0 not null,
    is_early_leave   tinyint(1) default 0 not null,
    is_hours_not_met tinyint(1) default 0 not null,
    is_over_time     tinyint(1) default 0 not null,
    constraint attendance_employee_emp_id_fk
        foreign key (emp_id) references employee (emp_id)
);

#禮券列表
create table gift_cash_list
(
    gift_cash_list_id int auto_increment
        primary key,
    cash              int         not null,
    gift_type         varchar(20) not null
);

#員工禮券
create table employee_gift_cash
(
    employee_gift_cash_id int auto_increment
        primary key,
    emp_id                int                                not null,
    gift_cash_list_id     int                                not null,
    created_at            datetime default CURRENT_TIMESTAMP null,
    expiry_date           datetime                           not null,
    status                varchar(20)                        not null,
    constraint employee_gift_cash_employee_emp_id_fk
        foreign key (emp_id) references employee (emp_id),
    constraint employee_gift_cash_gift_cash_list_id_fk
        foreign key (gift_cash_list_id) references gift_cash_list (gift_cash_list_id)
);

#員工登入帳號密碼表
create table login
(
    emp_id   int          not null
        primary key,
    password varchar(255) not null,
    constraint login_ibfk_1
        foreign key (emp_id) references employee (emp_id)
);


#辦公室位置記錄表
create table office_regions
(
    regions_id   int auto_increment
        primary key,
    latitude     double      not null,
    longitude    double      not null,
    regions_name varchar(20) not null
);

#打卡記錄表
create table clock_time
(
    clock_time_id int auto_increment
        primary key,
    emp_id        int         not null,
    time          datetime    not null,
    type          varchar(10) not null,
    regions_id    int         null,
    constraint clock_time_employee_emp_id_fk
        foreign key (emp_id) references employee (emp_id),
    constraint clock_time_office_regions_regions_id_fk
        foreign key (regions_id) references office_regions (regions_id)
);

#產品主類別
create table product_type
(
    type_id   int auto_increment
        primary key,
    type_name varchar(30) not null
);

#產品子類別
create table sub_type
(
    sub_type_id     int auto_increment
        primary key,
    product_type_id int         not null,
    sub_name        varchar(20) not null,
    constraint sub_type_product_type_type_id_fk
        foreign key (product_type_id) references product_type (type_id)
);
#產品
create table product
(
    product_id     int auto_increment
        primary key,
    product_name   varchar(30)                        not null,
    sub_type_id    int                                not null,
    description    varchar(50)                        null,
    price          int                                not null,
    stock_quantity int                                not null,
    image_url      varchar(255)                       null,
    created_at     datetime default CURRENT_TIMESTAMP null,
    updated_at     datetime default CURRENT_TIMESTAMP null on update CURRENT_TIMESTAMP,
    status         varchar(20)                        not null,
    constraint product_sub_type_sub_type_id_fk
        foreign key (sub_type_id) references sub_type (sub_type_id)
);

#購物車
create table cart
(
    cart_id    int auto_increment
        primary key,
    emp_id     int                                not null,
    created_at datetime default CURRENT_TIMESTAMP null,
    updated_at datetime default CURRENT_TIMESTAMP null on update CURRENT_TIMESTAMP,
    constraint shopping_cart_employee_emp_id_fk
        foreign key (emp_id) references employee (emp_id)
);


#購物車項目
create table cart_item
(
    cart_item_id int auto_increment
        primary key,
    cart_id      int                                not null,
    product_id   int                                not null,
    quantity     int                                not null,
    created_at   datetime default CURRENT_TIMESTAMP null,
    updated_at   datetime default CURRENT_TIMESTAMP null on update CURRENT_TIMESTAMP,
    constraint cart_item_product_product_id_fk
        foreign key (product_id) references product (product_id),
    constraint cart_item_shopping_cart_cart_id_fk
        foreign key (cart_id) references cart (cart_id)
);

#訂單
create table `order`
(
    order_id              int auto_increment
        primary key,
    emp_id                int                                not null,
    employee_gift_cash_id int                                null,
    total_price           int                                null,
    status                varchar(10)                        null,
    created_at            datetime default CURRENT_TIMESTAMP null,
    updated_at            datetime default CURRENT_TIMESTAMP null on update CURRENT_TIMESTAMP,
    constraint order_employee_emp_id_fk
        foreign key (emp_id) references employee (emp_id),
    constraint order_employee_gift_cash_employee_gift_cash_id_fk
        foreign key (employee_gift_cash_id) references employee_gift_cash (employee_gift_cash_id)
);
#訂單明細
create table order_item
(
    order_item_id int auto_increment
        primary key,
    order_id      int not null,
    product_id    int not null,
    price         int not null,
    quantity      int not null,
    total_price   int not null,
    constraint order_item_order_order_id_fk
        foreign key (order_id) references `order` (order_id),
    constraint order_item_product_product_id_fk
        foreign key (product_id) references product (product_id)
);


INSERT INTO eipulse.employee ( id_number, emp_name, gender, birth, photo, email, phone, tel, address) VALUES ( 'A123456789', 'anddie', '男', '1997-09-04', 0x3132333435, 'd0981843347@Gmail.com', '0912345678', '02-12345678', '台北市中山區');
INSERT INTO eipulse.employee ( id_number, emp_name, gender, birth, photo, email, phone, tel, address) VALUES ( 'B987654321', '陳美麗', '女', '1985-05-15', 0x3534333231, 'lisi@email.com', '0987654321', null, '新北市板橋區');
INSERT INTO eipulse.employee ( id_number, emp_name, gender, birth, photo, email, phone, tel, address) VALUES ( 'C456789012', '李大宇', '男', '1992-11-30', 0x3938373635, 'wangwu@email.com', '0912345678', '02-23456789', '台北市信義區');
INSERT INTO eipulse.employee ( id_number, emp_name, gender, birth, photo, email, phone, tel, address) VALUES ( 'D789012345', '林靜心', '女', '1988-07-20', 0x3637383930, 'liuqi@email.com', '0912345678', '03-12345678', '桃園市中壢區');
INSERT INTO eipulse.employee ( id_number, emp_name, gender, birth, photo, email, phone, tel, address) VALUES ( 'E234567890', '張文彬', '男', '1995-03-05', 0x3233343536, 'chenba@email.com', '0987654321', '03-23456789', '新竹市東區');
INSERT INTO eipulse.employee ( id_number, emp_name, gender, birth, photo, email, phone, tel, address) VALUES ( 'F567890123', '黃美玲', '女', '1997-12-18', 0x3738393031, 'qianjiu@email.com', '0912345678', '04-12345678', '台中市西屯區');
INSERT INTO eipulse.employee ( id_number, emp_name, gender, birth, photo, email, phone, tel, address) VALUES ( 'G890123456', '劉小華', '男', '1987-09-02', 0x3334353637, 'sunti@email.com', '0987654321', '04-23456789', '台中市北區');
INSERT INTO eipulse.employee ( id_number, emp_name, gender, birth, photo, email, phone, tel, address) VALUES ( 'H123456789', '陳怡君', '女', '1994-06-10', 0x3839303132, 'zhouyiyi@email.com', '0912345678', '05-12345678', '台南市東區');
INSERT INTO eipulse.employee ( id_number, emp_name, gender, birth, photo, email, phone, tel, address) VALUES ( 'I345678901', '吳宏偉', '男', '1998-04-03', 0x3435363738, 'wushi@email.com', '0987654321', '05-23456789', '台南市南區');
INSERT INTO eipulse.employee ( id_number, emp_name, gender, birth, photo, email, phone, tel, address) VALUES ( 'J678901234', '許雅琪', '女', '1991-08-05', 0x3031323334, 'zhaoliu@email.com', '0987654321', '02-34567890', '台北市大安區');


INSERT INTO eipulse.login (emp_id, password) VALUES (1000, '100');
INSERT INTO eipulse.login (emp_id, password) VALUES (1001, '100');
INSERT INTO eipulse.login (emp_id, password) VALUES (1002, '100');
INSERT INTO eipulse.login (emp_id, password) VALUES (1003, '100');
INSERT INTO eipulse.login (emp_id, password) VALUES (1004, '100');
INSERT INTO eipulse.login (emp_id, password) VALUES (1005, '100');
INSERT INTO eipulse.login (emp_id, password) VALUES (1006, '100');
INSERT INTO eipulse.login (emp_id, password) VALUES (1007, '100');
INSERT INTO eipulse.login (emp_id, password) VALUES (1008, '100');
INSERT INTO eipulse.login (emp_id, password) VALUES (1009, '100');

INSERT INTO eipulse.product_type (type_name) VALUES ( '票券');

INSERT INTO eipulse.sub_type (product_type_id, sub_name) VALUES ( 1, '電影票');
INSERT INTO eipulse.sub_type ( product_type_id, sub_name) VALUES ( 1, '餐券');
INSERT INTO eipulse.sub_type ( product_type_id, sub_name) VALUES ( 1, '商品卡');
INSERT INTO eipulse.sub_type ( product_type_id, sub_name) VALUES (1, '旅遊券');

INSERT INTO eipulse.product ( product_name, sub_type_id, description, price, stock_quantity, image_url,  status) VALUES ( '西提牛排套餐券', 2, '適用於西提', 710, 20, 'https://i1.momoshop.com.tw/1692455303/goodsimg/0011/276/551/11276551_R.jpg', '上架');
INSERT INTO eipulse.product ( product_name, sub_type_id, description, price, stock_quantity, image_url,  status) VALUES ( '7-11 500元禮品卡', 3, '適用全台7-11', 450, 20, 'https://img.sopower.com.tw/image/20200722/20200722132116_95880.jpg', '上架');
INSERT INTO eipulse.product ( product_name, sub_type_id, description, price, stock_quantity, image_url,  status) VALUES ( '威秀影城電影票', 1, '適用威秀影城', 270, 20, 'https://shoplineimg.com/5cc3db30527c4b0001a30cf0/5d99afc7916861001a6fec00/800x.webp?source_format=jpg',  '上架');
INSERT INTO eipulse.product ( product_name, sub_type_id, description, price, stock_quantity, image_url,  status) VALUES ( '漢來海港平日晚餐券', 2, '適用於南部漢來海港', 1020, 20, 'https://cs-a.ecimg.tw/items/DBCRNFA900GI4W7/000001_1689756008.jpg', '2023-10-23 16:11:10', '上架');
INSERT INTO eipulse.product ( product_name, sub_type_id, description, price, stock_quantity, image_url,  status) VALUES ( '全家 500元禮品卡', 3, '適用全台全家', 450, 3, 'https://mall.iopenmall.tw/website/uploads_product/website_12985/P1298504213225_3_37090503.jpeg?hash=99663', '上架');
INSERT INTO eipulse.product ( product_name, sub_type_id, description, price, stock_quantity, image_url,  status) VALUES ( '秀泰影城電影票', 1, '適用秀泰影城', 270, 10, 'https://shoplineimg.com/5a14d0ee72fdc03c82001454/613acabf9065d2002916d325/800x.webp?source_format=jpg', '上架');
INSERT INTO eipulse.product ( product_name, sub_type_id, description, price, stock_quantity, image_url,  status) VALUES ( '7-11 1000元禮品卡', 3, '適用全台7-11', 900, 7, 'https://www.cocorolife.tw/images/product/thumb/270030/20221230070753.jpg', '上架');
INSERT INTO eipulse.product ( product_name, sub_type_id, description, price, stock_quantity, image_url,  status) VALUES ( '國賓電影票', 1, '適用國賓影城', 270, 10, 'https://media.ticketxpress.com.tw/Images/a08a5db9-2b51-42b6-a956-90acc8232dad.jpg',  '上架');
INSERT INTO eipulse.product ( product_name, sub_type_id, description, price, stock_quantity, image_url,  status) VALUES ( '饗食天堂餐券', 2, '適用饗食天堂', 1050, 10, 'https://picdn.gomaji.com/products/o/476/335476/335476_1_48.jpg', '上架');


INSERT INTO eipulse.office_regions ( latitude, longitude, regions_name) VALUES ( 22.99944417097877, 120.21594456761729, '成大唯農分公司');
INSERT INTO eipulse.office_regions ( latitude, longitude, regions_name) VALUES ( 22.993460934548654, 120.22674896027664, '路易莎東安店');
INSERT INTO eipulse.office_regions ( latitude, longitude, regions_name) VALUES ( 23.02741940760638, 120.23923950479475, '台南新總圖');
INSERT INTO eipulse.office_regions ( latitude, longitude, regions_name) VALUES ( 23.008144102678692, 120.21331863796566, '台南公園總圖');
